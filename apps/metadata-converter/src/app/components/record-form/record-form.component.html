<p>
  <gn-ui-record-field-simple
    label="Unique identifier"
    [(fieldValue)]="record.uniqueIdentifier"
    (confirm)="emitChangedRecord()"
  ></gn-ui-record-field-simple>
</p>
<p>
  <gn-ui-record-field-simple
    label="Title"
    [(fieldValue)]="record.title"
    (confirm)="emitChangedRecord()"
  ></gn-ui-record-field-simple>
</p>
<p>
  <gn-ui-record-field-simple
    label="Abstract"
    [(fieldValue)]="record.abstract"
    (confirm)="emitChangedRecord()"
    [type]="'rich'"
  ></gn-ui-record-field-simple>
</p>
<p>
  <gn-ui-record-field-simple
    label="Kind"
    [options]="['dataset', 'service']"
    [fieldValue]="record.kind"
    (fieldValueChange)="switchToRecordKind($event)"
  ></gn-ui-record-field-simple>
</p>
<p>
  <gn-ui-record-field-group label="Owner Organisation">
    <gn-ui-record-field-simple
      label="Name"
      [(fieldValue)]="record.ownerOrganization.name"
      (confirm)="emitChangedRecord()"
    ></gn-ui-record-field-simple>
    <gn-ui-record-field-simple
      label="Description"
      [(fieldValue)]="record.ownerOrganization.description"
      (confirm)="emitChangedRecord()"
    ></gn-ui-record-field-simple>
    <gn-ui-record-field-simple
      label="Website"
      [(fieldValue)]="record.ownerOrganization.website"
      (confirm)="emitChangedRecord()"
      [type]="'url'"
    ></gn-ui-record-field-simple>
    <gn-ui-record-field-simple
      label="Logo URL"
      [(fieldValue)]="record.ownerOrganization.logoUrl"
      (confirm)="emitChangedRecord()"
      [type]="'url'"
    ></gn-ui-record-field-simple>
  </gn-ui-record-field-group>
</p>
<p>
  <gn-ui-record-field-array
    label="Contacts"
    [(fieldValue)]="record.contacts"
    [itemTemplate]="contactTpl"
    (confirm)="emitChangedRecord()"
    [defaultItem]="{
      firstName: 'first',
      lastName: 'last',
      email: 'email@domain.com',
      organization: { name: 'org' },
      role: 'unspecified'
    }"
  >
    <ng-template #contactTpl let-get="getValue" let-set="setValue">
      <gn-ui-record-field-group label="Contact">
        <gn-ui-record-field-simple
          label="First Name"
          [fieldValue]="get().firstName"
          (fieldValueChange)="set($event, 'firstName')"
          (confirm)="emitChangedRecord()"
        ></gn-ui-record-field-simple>
        <gn-ui-record-field-simple
          label="Last Name"
          [fieldValue]="get().lastName"
          (fieldValueChange)="set($event, 'lastName')"
          (confirm)="emitChangedRecord()"
        ></gn-ui-record-field-simple>
        <gn-ui-record-field-simple
          label="Email"
          [fieldValue]="get().email"
          (fieldValueChange)="set($event, 'email')"
          (confirm)="emitChangedRecord()"
        ></gn-ui-record-field-simple>
        <gn-ui-record-field-simple
          label="Role"
          [fieldValue]="get().role"
          (fieldValueChange)="set($event, 'role')"
          (confirm)="emitChangedRecord()"
          [options]="roleOptions"
        ></gn-ui-record-field-simple>
        <gn-ui-record-field-simple
          label="Position"
          [fieldValue]="get().position"
          (fieldValueChange)="set($event, 'position')"
          (confirm)="emitChangedRecord()"
        ></gn-ui-record-field-simple>
        <gn-ui-record-field-group label="Organisation">
          <gn-ui-record-field-simple
            label="Name"
            [fieldValue]="get().organization.name"
            (fieldValueChange)="set($event, 'organization', 'name')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            label="Description"
            [fieldValue]="get().organization.description"
            (fieldValueChange)="set($event, 'organization', 'description')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            label="Website"
            [fieldValue]="get().organization.website"
            (fieldValueChange)="set($event, 'organization', 'website')"
            (confirm)="emitChangedRecord()"
            [type]="'url'"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            label="Logo URL"
            [fieldValue]="get().organization.logoUrl"
            (fieldValueChange)="set($event, 'organization', 'logoUrl')"
            (confirm)="emitChangedRecord()"
            [type]="'url'"
          ></gn-ui-record-field-simple>
        </gn-ui-record-field-group>
      </gn-ui-record-field-group>
    </ng-template>
  </gn-ui-record-field-array>
</p>
<p class="grid grid-cols-2">
  <gn-ui-record-field-simple
    label="Record created on"
    [(fieldValue)]="record.recordCreated"
    (confirm)="emitChangedRecord()"
    [type]="'date'"
  ></gn-ui-record-field-simple>
  <gn-ui-record-field-simple
    label="Record updated on"
    [(fieldValue)]="record.recordUpdated"
    (confirm)="emitChangedRecord()"
    [type]="'date'"
  ></gn-ui-record-field-simple>
</p>
<p>
  <gn-ui-record-field-array
    label="Themes"
    [(fieldValue)]="record.themes"
    [itemTemplate]="themeTpl"
    (confirm)="emitChangedRecord()"
    [defaultItem]="'change me!'"
  >
    <ng-template #themeTpl let-get="getValue" let-set="setValue">
      <gn-ui-record-field-simple
        label="Theme"
        [fieldValue]="get()"
        (fieldValueChange)="set($event)"
        (confirm)="emitChangedRecord()"
      ></gn-ui-record-field-simple>
    </ng-template>
  </gn-ui-record-field-array>
</p>
<p>
  <gn-ui-record-field-array
    label="Keywords"
    [(fieldValue)]="record.keywords"
    [itemTemplate]="keywordTpl"
    (confirm)="emitChangedRecord()"
    [defaultItem]="'change me!'"
  >
    <ng-template #keywordTpl let-get="getValue" let-set="setValue">
      <gn-ui-record-field-simple
        label="Keyword"
        [fieldValue]="get()"
        (fieldValueChange)="set($event)"
        (confirm)="emitChangedRecord()"
      ></gn-ui-record-field-simple>
    </ng-template>
  </gn-ui-record-field-array>
</p>
<p>
  <gn-ui-record-field-array
    label="Use limitations"
    [(fieldValue)]="record.useLimitations"
    [itemTemplate]="useLimitationTpl"
    (confirm)="emitChangedRecord()"
    [defaultItem]="'change me!'"
  >
    <ng-template #useLimitationTpl let-get="getValue" let-set="setValue">
      <gn-ui-record-field-simple
        label="Use limitation"
        [fieldValue]="get()"
        (fieldValueChange)="set($event)"
        [type]="'rich'"
        (confirm)="emitChangedRecord()"
      ></gn-ui-record-field-simple>
    </ng-template>
  </gn-ui-record-field-array>
</p>
<p>
  <gn-ui-record-field-array
    label="Access constraints"
    [(fieldValue)]="record.accessConstraints"
    [itemTemplate]="accessConstraintTpl"
    (confirm)="emitChangedRecord()"
    [defaultItem]="{ text: 'change me!', type: 'other' }"
  >
    <ng-template #accessConstraintTpl let-get="getValue" let-set="setValue">
      <gn-ui-record-field-group label="Access constraint">
        <gn-ui-record-field-simple
          label="Text"
          [fieldValue]="get().text"
          (fieldValueChange)="set($event, 'text')"
          [type]="'rich'"
          (confirm)="emitChangedRecord()"
        ></gn-ui-record-field-simple>
        <gn-ui-record-field-simple
          label="Type"
          [fieldValue]="get().type"
          (fieldValueChange)="set($event, 'type')"
          [options]="['security', 'privacy', 'legal', 'other']"
          (confirm)="emitChangedRecord()"
        ></gn-ui-record-field-simple>
      </gn-ui-record-field-group>
    </ng-template>
  </gn-ui-record-field-array>
</p>
<p>
  <gn-ui-record-field-array
    label="Licenses"
    [(fieldValue)]="record.licenses"
    [itemTemplate]="licenseTpl"
    (confirm)="emitChangedRecord()"
    [defaultItem]="{ text: 'change me!' }"
  >
    <ng-template #licenseTpl let-get="getValue" let-set="setValue">
      <gn-ui-record-field-group label="License">
        <gn-ui-record-field-simple
          label="Text"
          [fieldValue]="get().text"
          (fieldValueChange)="set($event, 'text')"
          [type]="'rich'"
          (confirm)="emitChangedRecord()"
        ></gn-ui-record-field-simple>
        <gn-ui-record-field-simple
          label="URL"
          [fieldValue]="get().url"
          (fieldValueChange)="set($event, 'url')"
          [type]="'url'"
          (confirm)="emitChangedRecord()"
        ></gn-ui-record-field-simple>
      </gn-ui-record-field-group>
    </ng-template>
  </gn-ui-record-field-array>
</p>

<div *ngIf="isDatasetRecord">
  <p class="text-xl font-bold font-title mt-8 mb-0 m-2">
    Dataset record specific fields
  </p>
  <p>
    <gn-ui-record-field-simple
      label="Status"
      [(fieldValue)]="record.status"
      (confirm)="emitChangedRecord()"
      [options]="statusOptions"
    ></gn-ui-record-field-simple>
  </p>
  <p>
    <gn-ui-record-field-simple
      label="Spatial Representation Type"
      [(fieldValue)]="record.spatialRepresentation"
      (confirm)="emitChangedRecord()"
      [options]="['grid', 'vector', 'tin', 'table', 'point']"
    ></gn-ui-record-field-simple>
  </p>
  <p>
    <gn-ui-record-field-simple
      label="Lineage"
      [(fieldValue)]="record.lineage"
      (confirm)="emitChangedRecord()"
      [type]="'rich'"
    ></gn-ui-record-field-simple>
  </p>
  <p class="grid grid-cols-2">
    <gn-ui-record-field-simple
      label="Dataset created on"
      [(fieldValue)]="record.datasetCreated"
      (confirm)="emitChangedRecord()"
      [type]="'date'"
    ></gn-ui-record-field-simple>
    <gn-ui-record-field-simple
      label="Dataset updated on"
      [(fieldValue)]="record.datasetUpdated"
      (confirm)="emitChangedRecord()"
      [type]="'date'"
    ></gn-ui-record-field-simple>
  </p>
  <p>
    <gn-ui-record-field-array
      label="Distributions"
      [(fieldValue)]="record.distributions"
      [itemTemplate]="distributionTpl"
      (confirm)="emitChangedRecord()"
      [defaultItem]="getDistributionForType('download')"
    >
      <ng-template #distributionTpl let-get="getValue" let-set="setValue">
        <gn-ui-record-field-group label="Distribution">
          <gn-ui-record-field-simple
            label="Type"
            [options]="['service', 'download', 'link']"
            [fieldValue]="get().type"
            (fieldValueChange)="set(getDistributionForType($event))"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            *ngIf="get().type === 'service'"
            label="Access Service URL"
            [type]="'url'"
            [fieldValue]="get().url"
            (fieldValueChange)="set($event, 'url')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            *ngIf="get().type === 'service'"
            label="Access Service Protocol"
            [fieldValue]="get().accessServiceProtocol"
            (fieldValueChange)="set($event, 'accessServiceProtocol')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            *ngIf="get().type === 'service'"
            label="Identifier In Service"
            [fieldValue]="get().identifierInService"
            (fieldValueChange)="set($event, 'identifierInService')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            *ngIf="get().type === 'download'"
            label="Download URL"
            [type]="'url'"
            [fieldValue]="get().url"
            (fieldValueChange)="set($event, 'url')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            *ngIf="get().type === 'download'"
            label="Mime Type"
            [fieldValue]="get().mimeType"
            (fieldValueChange)="set($event, 'mimeType')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            *ngIf="get().type === 'download'"
            label="Size In Bytes"
            [type]="'number'"
            [fieldValue]="get().sizeBytes"
            (fieldValueChange)="set($event, 'sizeBytes')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            *ngIf="get().type === 'link'"
            label="Link URL"
            [type]="'url'"
            [fieldValue]="get().url"
            (fieldValueChange)="set($event, 'url')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            label="Name"
            [fieldValue]="get().name"
            (fieldValueChange)="set($event, 'name')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            label="Description"
            [type]="'rich'"
            [fieldValue]="get().description"
            (fieldValueChange)="set($event, 'description')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
        </gn-ui-record-field-group>
      </ng-template>
    </gn-ui-record-field-array>
  </p>
</div>

<div *ngIf="isServiceRecord">
  <p class="text-xl font-bold font-title mt-8 mb-0 m-2">
    Service record specific fields
  </p>
  <p>
    <gn-ui-record-field-array
      label="Online Resources"
      [(fieldValue)]="record.onlineResources"
      [itemTemplate]="endpointTpl"
      (confirm)="emitChangedRecord()"
      [defaultItem]="{ endpointUrl: '', protocol: 'OGC:WMS' }"
    >
      <ng-template #endpointTpl let-get="getValue" let-set="setValue">
        <gn-ui-record-field-group label="Online Resource">
          <gn-ui-record-field-simple
            label="Type"
            [options]="['endpoint', 'link']"
            [fieldValue]="get().type"
            (fieldValueChange)="set(getOnlineResourceForType($event))"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            *ngIf="get().type === 'endpoint'"
            label="Endpoint URL"
            [type]="'url'"
            [fieldValue]="get().endpointUrl"
            (fieldValueChange)="set($event, 'endpointUrl')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            *ngIf="get().type === 'endpoint'"
            label="Protocol"
            [fieldValue]="get().protocol"
            (fieldValueChange)="set($event, 'protocol')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            *ngIf="get().type === 'link'"
            label="Name"
            [fieldValue]="get().name"
            (fieldValueChange)="set($event, 'name')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
          <gn-ui-record-field-simple
            label="Description"
            [type]="'rich'"
            [fieldValue]="get().description"
            (fieldValueChange)="set($event, 'description')"
            (confirm)="emitChangedRecord()"
          ></gn-ui-record-field-simple>
        </gn-ui-record-field-group>
      </ng-template>
    </gn-ui-record-field-array>
  </p>
</div>
